---
layout: project/project.njk 
type: note
--- 

{% set replies = webmentions | getWebmentionsByTypes(['mention-of', 'in-reply-to'])%}
{% set reactions = webmentions | getWebmentionsByTypes(['like-of', 'repost-of', 'bookmark-of']) %}
{% set mentions = webmentions | getWebmentionsByTypes(['mention-of']) %}
{% set inreplies = webmentions | getWebmentionsByTypes(['in-reply-to'])%}

<div class="blogpost note h-entry" data-pagefind-body>
    {% if externalLink %} <a class="externalLink" href="{{ externalLink }}"> </a> {% else %}{% endif %}
    <div class="blogpost-header">
        <div class="information">
            <h1 class="p-name"> {{ title }}</h1>
            <time class="dt-published" data-pagefind-sort="date">{% if date %} {{ date.toUTCString()}} {% endif %}</time>
            {% if notetype == "reply" %}
            <span>In reply to: <a class="u-in-reply-to mention-link" href="{{ targetLink }}">{{ targetLink }}</a></span> 
            {% endif %}
            {% if notetype == "like" %}
            <span>Liked post: <a class="u-like-of mention-link" href="{{ targetLink }}">{{ targetLink }}</a></span> 
            {% endif %}
            {% if notetype == "bookmark" %}
            <span>Bookmarked post: <a class="u-bookmark-of h-cite mention-link" href="{{ targetLink }}">{{ targetLink }}</a></span> 
            {% endif %}
        </div>
    </div>
    <div class="blogpost-content e-content">
        {{ content | safe }}
    </div>
    <div class="blogpost-footer">
        <a rel=author href="https://www.wingpang.com" class="hidden p-author h-card" aria-hidden>Wing Pang</a>
        <a href="{{ url }}" class="u-url hidden" aria-hidden>Link to {{ title }} note</a>
        <div class="tags" id="blogpost-footer-tags">
            {% for tag in tags %}
                {# TODO: sort by tag + allow users to click to a page that filters it #}
                <div data-pagefind-filter="Filter by tags" class="tag p-category" href="#">
                    #{{ tag }}
                </div>
            {% endfor %}
        </div>
        <div id="blogpost-footer-actions">
            <span class="like"><img src="/assets/img/icons/heart.svg" alt=""> {{ reactions.length }}</span>
            <span class="reply"><img src="/assets/img/icons/comment.svg" alt="">{{ replies.length }}</span>
        </div>
    </div>
</div>